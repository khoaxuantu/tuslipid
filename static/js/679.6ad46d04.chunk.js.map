{"version":3,"file":"static/js/679.6ad46d04.chunk.js","mappings":"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","sources":["components/guestbook/header.tsx","components/guestbook/actions.tsx","components/guestbook/form.tsx","components/guestbook/list.tsx","components/guestbook/body.tsx","components/guestbook/page.tsx"],"sourcesContent":["export default function GuestbookHeader() {\n    return (\n      <div className='header-grp'>\n        <div className='header-txt'>\n          <b>Guestbook</b>\n        </div>\n        <div className='description-txt mt-2'>\n          This idea is inspired by {\" \"}\n          <a href=\"https://leerob.io/\" target='_blank' rel='noreferrer'>Lee Robinson's portfolio</a>\n          {\" \"}:{\")\"}\n        </div>\n        <hr />\n      </div>\n    );\n}","import { LoginButton } from \"../../lib/factory/buttonBase\";\nimport { useNavigate } from \"react-router-dom\";\nimport { oauthInfoList } from \"../../lib/general_info\";\nimport { useGoogleLogin } from \"@react-oauth/google\";\n\nconst { \n    REACT_APP_BACKEND_DOMAIN,\n    REACT_APP_GITHUB_CLIENT_ID } = process.env;\n\nexport function SignIn() {\n    \n    /**\n     * Login with Github will redirect user to an authorization callback URL\n     * so I redirect to a new route \"/oauth\" instead of back to this route \"/guestbook\"\n     * \n     * At route \"/oauth\", the received authorization code will be fetched to\n     * the backend api to process authentication. After backend responses \n     * a access_token successfully, users will be redirected back to \"/guestbook\"\n     */\n    function loginWithGithub() {\n        window.location.assign(\"https://github.com/login/oauth/authorize?client_id=\" + REACT_APP_GITHUB_CLIENT_ID);\n    }\n\n    /**\n     * Login with Google uses @react-oauth/google library, which authorizes\n     * in popup mode. The code is returned to in-browser's app callback handler,\n     * without users needing to leave the website\n     * \n     * https://developers.google.com/identity/oauth2/web/guides/how-user-authz-works#when_using_the_auth_code_flow\n     */\n    let navigate = useNavigate();\n    const loginWithGoogle = useGoogleLogin({\n        onSuccess: async ({code}) => {\n            if (localStorage.getItem(\"accessToken\") === null) {\n                await fetch(`${REACT_APP_BACKEND_DOMAIN}/oauth/google/access_token?code=` + code, {\n                    method: \"GET\"\n                })\n                .then(response => response.json())\n                .then(data => {\n                    if (data.access_token) {\n                        localStorage.setItem(\"accessToken\", data.access_token);\n                        localStorage.setItem(\"third-party\", \"google\");\n                        return navigate(\"/guestbook\");\n                    }\n                });\n            }\n        },\n        flow: \"auth-code\",\n    });\n\n    const onClickHandlers: any[] = [\n        loginWithGithub,\n        () => loginWithGoogle()\n    ];\n\n    return (\n        <>\n            {\n                oauthInfoList.map((oauth, index) => {\n                    return (\n                        <div key={oauth.name} className=\"col-6 btn-oauth-box\">\n                            <LoginButton \n                                onClick={onClickHandlers[index]}\n                                {...oauth} />\n                        </div>\n                    );\n                })\n            }\n        </>\n    );\n}\n\nexport function SignOut() {\n    let navigate = useNavigate();\n\n    function logOut() {\n        localStorage.removeItem(\"third-party\");\n        localStorage.removeItem(\"data\");\n        return navigate(\"/guestbook\");\n    }\n\n    return (\n        <button className=\"btn btn-rect\" onClick={logOut}>\n            Sign out\n        </button>\n    );\n}","import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nconst { REACT_APP_BACKEND_DOMAIN } = process.env;\n\nexport interface IMessage {\n    name: string | null,\n    message: string\n}\n\nfunction capitalFirstLetter(s: string): string {  \n    return s.charAt(0).toUpperCase() + s.slice(1);\n}\n\nfunction GuestbookForm() {\n    const [User, setUser] = useState(\"\");\n\n    // Take username for every page restart\n    let username: string | null = null;\n    if (localStorage.getItem(\"data\") !== null) {\n        username = JSON.parse(localStorage.getItem(\"data\") as any).name;\n    }\n\n    async function fetchUser(thirdParty: string) {\n        console.log(`get ${thirdParty} user`);\n        const fetchAPI = await fetch(`${REACT_APP_BACKEND_DOMAIN}/oauth/${thirdParty}/user`, {\n            method: \"GET\",\n            headers: {\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"accessToken\")\n            }\n        });\n        const response = await fetchAPI.json();\n        return response;\n    }\n\n    const getGithubUser = async () => {\n        const response = await fetchUser(\"github\");\n        localStorage.removeItem(\"accessToken\");\n        localStorage.setItem(\"data\", JSON.stringify({\n            name: response.login\n        }));\n        setUser(response.login);\n    }\n\n    const getGoogleUser = async () => {\n        const response = await fetchUser(\"google\");\n        localStorage.removeItem(\"accessToken\");\n        localStorage.setItem(\"data\", JSON.stringify({\n            name: response.name\n        }));\n        setUser(response.name);\n    }\n\n    useEffect(() => {\n        if (localStorage.getItem(\"data\") === null) {\n            if (localStorage.getItem(\"third-party\") === \"github\") {\n                getGithubUser();\n            }\n            else if (localStorage.getItem(\"third-party\") === \"google\") {\n                getGoogleUser();\n            }\n        }\n    }, []);\n    \n    async function submitHandler(e: any) {        \n        const data = JSON.parse(localStorage.getItem(\"data\") as any);\n        const input = document.getElementById(\"your-message\") as HTMLFormElement;\n        if (input.value.length === 0) {\n            alert(\"Your message cannot be empty\");\n            e.preventDefault();\n            return;\n        }\n        if (input.value.length > 512) {\n            alert(\"Too long! Won't read -_-\");\n            e.preventDefault();\n            return;\n        }\n\n        const newMessage: IMessage = {\n            name: data.name,\n            message: input.value\n        }\n\n        // await fetch(`${REACT_APP_BACKEND_DOMAIN}/guestbook/add/`, {\n        //     method: \"POST\",\n        //     headers: {\n        //         \"Content-Type\": \"application/json\",\n        //     },\n        //     body: JSON.stringify(newMessage),\n        //     mode: `cors`\n        // })\n        // .then(res => res.json())\n        // .then(data => console.log(data));\n        await axios.post(`${REACT_APP_BACKEND_DOMAIN}/guestbook/add/`, JSON.stringify(newMessage), {\n            headers: {\n                \"Content-Type\": \"application/json\",\n            }\n        })\n    }\n\n    return (\n        <>\n            <p className=\"mb-2\">\n                Sign in as {\" \"} \n                <b>{username !== null ? username : User}</b> {\" \"}\n                via <b>{capitalFirstLetter(localStorage.getItem(\"third-party\") as string)}</b>\n            </p>\n            <form className=\"mb-3 guestbook-form row\" onSubmit={submitHandler}>\n                <input \n                    className=\"col-10 ps-3 pt-3 pb-3 pe-5\" \n                    placeholder=\"Your message...\"\n                    autoComplete=\"off\"\n                    type=\"text\" name=\"your message\" aria-label=\"your message\" id=\"your-message\" />\n                <button className=\"col-2 p-2\" type=\"submit\"><b>Sign</b></button>\n            </form>\n        </>\n    );\n}\n\nexport default GuestbookForm;","import { useEffect, useState } from \"react\";\n\nconst DOMAIN = process.env.REACT_APP_BACKEND_DOMAIN;\n\nfunction GuestbookList({maxGuests} : {maxGuests: number}) {\n    /**\n     * Implement infinite scrolling for guestbook\n     * - messageNums The number of messages for each\n     */\n    const messageNums = 40;\n    const [startId, setStartId] = useState(0);\n    const [hasMore, setHasMore] = useState(true);\n    const [msgs, setMsgs] : [any, any] = useState([]);\n\n    useEffect(() => {\n\n        const fetchMsgs = async (startId: number) => {\n            const nextStartId = startId + messageNums;\n            if (nextStartId >= maxGuests) setHasMore(!hasMore);\n\n            const fetchAPI = await fetch(`${DOMAIN}/guestbook/list/${startId}`);\n            const data = await fetchAPI.json();\n            setMsgs([...msgs, ...data]);\n        }\n\n        if (hasMore) fetchMsgs(startId);\n    }, [startId]);\n\n    useEffect(() => {\n        function onScroll() {\n            const scrollTop = document.documentElement.scrollTop;\n            const scrollHeight = document.documentElement.scrollHeight;\n            const clientHeight = document.documentElement.clientHeight;\n\n            if (scrollTop + clientHeight >= scrollHeight && hasMore) {\n                setStartId(startId => startId + messageNums);\n            }\n        }\n\n        window.addEventListener('scroll', onScroll)\n        return () => window.removeEventListener('scroll', onScroll)\n    }, [msgs]);\n\n    const guestbook = document.getElementsByClassName(\"guestbook-txt\")[0] as HTMLElement;\n    const wrapper = document.getElementsByClassName(\"guestbook-wrapper\")[0] as HTMLElement;\n    useEffect(() => {\n      if (wrapper.childNodes.length !== 0) wrapper.style.height = \"auto\";\n    }, [guestbook])\n\n    return (\n        <>\n            {msgs.map((msg: any, index: number) => {\n                return(\n                    <p key={index} className=\"mb-3\">\n                        <b>{msg.guest.name}:</b>{\" \"}\n                        {msg.guest.message}\n                    </p>\n                );\n            })}\n        </>\n    );\n}\n\nexport default GuestbookList;","import { useEffect, useState } from \"react\";\nimport * as Action from \"./actions\";\nimport GuestbookForm from \"./form\";\nimport GuestbookList from \"./list\";\nimport { GoogleOAuthProvider } from \"@react-oauth/google\";\n\nconst GG_CLIENT_ID: string = process.env.REACT_APP_GOOGLE_CLIENT_ID as string;\nconst DOMAIN = process.env.REACT_APP_BACKEND_DOMAIN;\n\nfunction GuestbookBody() {\n  const [maxGuests, setMaxGuests] = useState(0);\n  useEffect(() => {\n    const fetchMaxGuests = async () => {\n      const fetchAPI = await fetch(`${DOMAIN}/guestbook/totalRecords`);\n      const curMaxGuests = await fetchAPI.json();\n      setMaxGuests(curMaxGuests[0][\"count\"]);\n    };\n\n    fetchMaxGuests();\n  }, []);\n\n  return (\n    <div className=\"guestbook-wrapper mb-5\">\n      <GoogleOAuthProvider clientId={GG_CLIENT_ID}>\n        <div className=\"btn-grp oauth-grp pb-4\">\n          {localStorage.getItem(\"third-party\") === null ? (\n            <Action.SignIn />\n          ) : (\n            <>\n              <GuestbookForm />\n              <Action.SignOut />\n            </>\n          )}\n        </div>\n      </GoogleOAuthProvider>\n      <hr />\n      <article className=\"mt-5 guestbook-txt\">\n        {maxGuests > 0 ? (\n          <GuestbookList maxGuests={maxGuests} />\n        ) : (\n          <p>Waiting for the first message...</p>\n        )}\n      </article>\n    </div>\n  );\n}\n\nexport default GuestbookBody;\n","import { motion as m } from \"framer-motion\";\nimport GuestbookHeader from \"./header\";\nimport Copyright from \"../copyright\";\nimport GuestbookBody from \"./body\";\n\n\nexport default function GuestbookPage() {\n    return(\n        <m.div\n            transition={{ duration: 0.8 }}\n            exit={{ opacity: 0 }} \n            className=\"container page-wrapper transition-page\">\n            <GuestbookHeader />\n            <GuestbookBody />\n            <Copyright copyright_class=\"page-copyright pb-3\" />\n        </m.div>\n    );\n}"],"names":["GuestbookHeader","_jsxs","className","children","_jsx","href","target","rel","REACT_APP_BACKEND_DOMAIN","process","REACT_APP_GITHUB_CLIENT_ID","SignIn","navigate","useNavigate","loginWithGoogle","useGoogleLogin","onSuccess","_onSuccess","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","code","wrap","_context","prev","next","localStorage","getItem","fetch","concat","method","then","response","json","data","access_token","setItem","stop","_x","apply","arguments","flow","onClickHandlers","window","location","assign","_Fragment","oauthInfoList","oauth","index","LoginButton","_objectSpread","onClick","name","SignOut","removeItem","_useState","useState","_useState2","_slicedToArray","User","setUser","username","fetchUser","_fetchUser","_callee3","thirdParty","fetchAPI","_context3","console","log","headers","sent","abrupt","JSON","parse","s","getGithubUser","stringify","login","getGoogleUser","_ref2","_callee2","_context2","_submitHandler","_callee4","e","input","newMessage","_context4","document","getElementById","value","length","alert","preventDefault","message","axios","useEffect","charAt","toUpperCase","slice","onSubmit","_x2","placeholder","autoComplete","type","id","maxGuests","startId","setStartId","_useState3","_useState4","hasMore","setHasMore","_useState5","_useState6","msgs","setMsgs","fetchMsgs","_toConsumableArray","onScroll","scrollTop","documentElement","scrollHeight","clientHeight","addEventListener","removeEventListener","guestbook","getElementsByClassName","wrapper","childNodes","style","height","map","msg","guest","setMaxGuests","fetchMaxGuests","curMaxGuests","GoogleOAuthProvider","clientId","Action","GuestbookForm","GuestbookList","GuestbookPage","m","transition","duration","exit","opacity","GuestbookBody","Copyright","copyright_class"],"sourceRoot":""}