{"version":3,"file":"static/js/719.8e92a1e2.chunk.js","mappings":"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","sources":["components/guestbook/header.tsx","../node_modules/@react-oauth/google/dist/index.esm.js","components/guestbook/actions.tsx","components/guestbook/form.tsx","components/guestbook/list.tsx","components/guestbook/body.tsx","components/guestbook/page.tsx"],"sourcesContent":["export default function GuestbookHeader() {\n    return (\n      <div className='header-grp'>\n        <div className='header-txt'>\n          <b>Guestbook</b>\n        </div>\n        <div className='body-txt mt-2'>\n          This idea is inspired by {\" \"}\n          <a href=\"https://leerob.io/\" target='_blank' rel='noreferrer'>Lee Robinson's portfolio</a>\n          {\" \"}:{\")\"}\n        </div>\n        <hr />\n      </div>\n    );\n}\n","import React, { useState, useRef, useEffect, createContext, useMemo, useContext, useCallback } from 'react';\n\nfunction useLoadGsiScript(options = {}) {\r\n    const { nonce, onScriptLoadSuccess, onScriptLoadError } = options;\r\n    const [scriptLoadedSuccessfully, setScriptLoadedSuccessfully] = useState(false);\r\n    const onScriptLoadSuccessRef = useRef(onScriptLoadSuccess);\r\n    onScriptLoadSuccessRef.current = onScriptLoadSuccess;\r\n    const onScriptLoadErrorRef = useRef(onScriptLoadError);\r\n    onScriptLoadErrorRef.current = onScriptLoadError;\r\n    useEffect(() => {\r\n        const scriptTag = document.createElement('script');\r\n        scriptTag.src = 'https://accounts.google.com/gsi/client';\r\n        scriptTag.async = true;\r\n        scriptTag.defer = true;\r\n        scriptTag.nonce = nonce;\r\n        scriptTag.onload = () => {\r\n            var _a;\r\n            setScriptLoadedSuccessfully(true);\r\n            (_a = onScriptLoadSuccessRef.current) === null || _a === void 0 ? void 0 : _a.call(onScriptLoadSuccessRef);\r\n        };\r\n        scriptTag.onerror = () => {\r\n            var _a;\r\n            setScriptLoadedSuccessfully(false);\r\n            (_a = onScriptLoadErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onScriptLoadErrorRef);\r\n        };\r\n        document.body.appendChild(scriptTag);\r\n        return () => {\r\n            document.body.removeChild(scriptTag);\r\n        };\r\n    }, [nonce]);\r\n    return scriptLoadedSuccessfully;\r\n}\n\nconst GoogleOAuthContext = createContext(null);\r\nfunction GoogleOAuthProvider({ clientId, nonce, onScriptLoadSuccess, onScriptLoadError, children, }) {\r\n    const scriptLoadedSuccessfully = useLoadGsiScript({\r\n        nonce,\r\n        onScriptLoadSuccess,\r\n        onScriptLoadError,\r\n    });\r\n    const contextValue = useMemo(() => ({\r\n        clientId,\r\n        scriptLoadedSuccessfully,\r\n    }), [clientId, scriptLoadedSuccessfully]);\r\n    return (React.createElement(GoogleOAuthContext.Provider, { value: contextValue }, children));\r\n}\r\nfunction useGoogleOAuth() {\r\n    const context = useContext(GoogleOAuthContext);\r\n    if (!context) {\r\n        throw new Error('Google OAuth components must be used within GoogleOAuthProvider');\r\n    }\r\n    return context;\r\n}\n\nfunction extractClientId(credentialResponse) {\r\n    var _a;\r\n    const clientId = (_a = credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.clientId) !== null && _a !== void 0 ? _a : credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.client_id;\r\n    return clientId;\r\n}\n\nconst containerHeightMap = { large: 40, medium: 32, small: 20 };\r\nfunction GoogleLogin({ onSuccess, onError, useOneTap, promptMomentNotification, type = 'standard', theme = 'outline', size = 'large', text, shape, logo_alignment, width, locale, click_listener, containerProps, ...props }) {\r\n    const btnContainerRef = useRef(null);\r\n    const { clientId, scriptLoadedSuccessfully } = useGoogleOAuth();\r\n    const onSuccessRef = useRef(onSuccess);\r\n    onSuccessRef.current = onSuccess;\r\n    const onErrorRef = useRef(onError);\r\n    onErrorRef.current = onError;\r\n    const promptMomentNotificationRef = useRef(promptMomentNotification);\r\n    promptMomentNotificationRef.current = promptMomentNotification;\r\n    useEffect(() => {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n        if (!scriptLoadedSuccessfully)\r\n            return;\r\n        (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.initialize({\r\n            client_id: clientId,\r\n            callback: (credentialResponse) => {\r\n                var _a;\r\n                if (!(credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.credential)) {\r\n                    return (_a = onErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onErrorRef);\r\n                }\r\n                const { credential, select_by } = credentialResponse;\r\n                onSuccessRef.current({\r\n                    credential,\r\n                    clientId: extractClientId(credentialResponse),\r\n                    select_by,\r\n                });\r\n            },\r\n            ...props,\r\n        });\r\n        (_f = (_e = (_d = window === null || window === void 0 ? void 0 : window.google) === null || _d === void 0 ? void 0 : _d.accounts) === null || _e === void 0 ? void 0 : _e.id) === null || _f === void 0 ? void 0 : _f.renderButton(btnContainerRef.current, {\r\n            type,\r\n            theme,\r\n            size,\r\n            text,\r\n            shape,\r\n            logo_alignment,\r\n            width,\r\n            locale,\r\n            click_listener,\r\n        });\r\n        if (useOneTap)\r\n            (_j = (_h = (_g = window === null || window === void 0 ? void 0 : window.google) === null || _g === void 0 ? void 0 : _g.accounts) === null || _h === void 0 ? void 0 : _h.id) === null || _j === void 0 ? void 0 : _j.prompt(promptMomentNotificationRef.current);\r\n        return () => {\r\n            var _a, _b, _c;\r\n            if (useOneTap)\r\n                (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.cancel();\r\n        };\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [\r\n        clientId,\r\n        scriptLoadedSuccessfully,\r\n        useOneTap,\r\n        type,\r\n        theme,\r\n        size,\r\n        text,\r\n        shape,\r\n        logo_alignment,\r\n        width,\r\n        locale,\r\n    ]);\r\n    return (React.createElement(\"div\", { ...containerProps, ref: btnContainerRef, style: { height: containerHeightMap[size], ...containerProps === null || containerProps === void 0 ? void 0 : containerProps.style } }));\r\n}\n\nfunction googleLogout() {\r\n    var _a, _b, _c;\r\n    (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.disableAutoSelect();\r\n}\n\n/* eslint-disable import/export */\r\nfunction useGoogleLogin({ flow = 'implicit', scope = '', onSuccess, onError, onNonOAuthError, overrideScope, state, ...props }) {\r\n    const { clientId, scriptLoadedSuccessfully } = useGoogleOAuth();\r\n    const clientRef = useRef();\r\n    const onSuccessRef = useRef(onSuccess);\r\n    onSuccessRef.current = onSuccess;\r\n    const onErrorRef = useRef(onError);\r\n    onErrorRef.current = onError;\r\n    const onNonOAuthErrorRef = useRef(onNonOAuthError);\r\n    onNonOAuthErrorRef.current = onNonOAuthError;\r\n    useEffect(() => {\r\n        var _a;\r\n        if (!scriptLoadedSuccessfully)\r\n            return;\r\n        const clientMethod = flow === 'implicit' ? 'initTokenClient' : 'initCodeClient';\r\n        const client = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts.oauth2[clientMethod]({\r\n            client_id: clientId,\r\n            scope: overrideScope ? scope : `openid profile email ${scope}`,\r\n            callback: (response) => {\r\n                var _a, _b;\r\n                if (response.error)\r\n                    return (_a = onErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onErrorRef, response);\r\n                (_b = onSuccessRef.current) === null || _b === void 0 ? void 0 : _b.call(onSuccessRef, response);\r\n            },\r\n            error_callback: (nonOAuthError) => {\r\n                var _a;\r\n                (_a = onNonOAuthErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onNonOAuthErrorRef, nonOAuthError);\r\n            },\r\n            state,\r\n            ...props,\r\n        });\r\n        clientRef.current = client;\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [clientId, scriptLoadedSuccessfully, flow, scope, state]);\r\n    const loginImplicitFlow = useCallback((overrideConfig) => { var _a; return (_a = clientRef.current) === null || _a === void 0 ? void 0 : _a.requestAccessToken(overrideConfig); }, []);\r\n    const loginAuthCodeFlow = useCallback(() => { var _a; return (_a = clientRef.current) === null || _a === void 0 ? void 0 : _a.requestCode(); }, []);\r\n    return flow === 'implicit' ? loginImplicitFlow : loginAuthCodeFlow;\r\n}\n\nfunction useGoogleOneTapLogin({ onSuccess, onError, promptMomentNotification, cancel_on_tap_outside, prompt_parent_id, state_cookie_domain, hosted_domain, disabled, }) {\r\n    const { clientId, scriptLoadedSuccessfully } = useGoogleOAuth();\r\n    const onSuccessRef = useRef(onSuccess);\r\n    onSuccessRef.current = onSuccess;\r\n    const onErrorRef = useRef(onError);\r\n    onErrorRef.current = onError;\r\n    const promptMomentNotificationRef = useRef(promptMomentNotification);\r\n    promptMomentNotificationRef.current = promptMomentNotification;\r\n    useEffect(() => {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n        if (!scriptLoadedSuccessfully)\r\n            return;\r\n        if (disabled) {\r\n            (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.cancel();\r\n            return;\r\n        }\r\n        (_f = (_e = (_d = window === null || window === void 0 ? void 0 : window.google) === null || _d === void 0 ? void 0 : _d.accounts) === null || _e === void 0 ? void 0 : _e.id) === null || _f === void 0 ? void 0 : _f.initialize({\r\n            client_id: clientId,\r\n            callback: (credentialResponse) => {\r\n                var _a;\r\n                if (!(credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.credential)) {\r\n                    return (_a = onErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onErrorRef);\r\n                }\r\n                const { credential, select_by } = credentialResponse;\r\n                onSuccessRef.current({\r\n                    credential,\r\n                    clientId: extractClientId(credentialResponse),\r\n                    select_by,\r\n                });\r\n            },\r\n            hosted_domain,\r\n            cancel_on_tap_outside,\r\n            prompt_parent_id,\r\n            state_cookie_domain,\r\n        });\r\n        (_j = (_h = (_g = window === null || window === void 0 ? void 0 : window.google) === null || _g === void 0 ? void 0 : _g.accounts) === null || _h === void 0 ? void 0 : _h.id) === null || _j === void 0 ? void 0 : _j.prompt(promptMomentNotificationRef.current);\r\n        return () => {\r\n            var _a, _b, _c;\r\n            (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.cancel();\r\n        };\r\n    }, [\r\n        clientId,\r\n        scriptLoadedSuccessfully,\r\n        cancel_on_tap_outside,\r\n        prompt_parent_id,\r\n        state_cookie_domain,\r\n        hosted_domain,\r\n        disabled,\r\n    ]);\r\n}\n\n/**\r\n * Checks if the user granted all the specified scope or scopes\r\n * @returns True if all the scopes are granted\r\n */\r\nfunction hasGrantedAllScopesGoogle(tokenResponse, firstScope, ...restScopes) {\r\n    var _a, _b, _c;\r\n    if (!(window === null || window === void 0 ? void 0 : window.google))\r\n        return false;\r\n    return (((_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.oauth2) === null || _c === void 0 ? void 0 : _c.hasGrantedAllScopes(tokenResponse, firstScope, ...restScopes)) || false);\r\n}\n\n/**\r\n * Checks if the user granted any of the specified scope or scopes.\r\n * @returns True if any of the scopes are granted\r\n */\r\nfunction hasGrantedAnyScopeGoogle(tokenResponse, firstScope, ...restScopes) {\r\n    var _a, _b, _c;\r\n    if (!(window === null || window === void 0 ? void 0 : window.google))\r\n        return false;\r\n    return (((_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.oauth2) === null || _c === void 0 ? void 0 : _c.hasGrantedAnyScope(tokenResponse, firstScope, ...restScopes)) || false);\r\n}\n\nexport { GoogleLogin, GoogleOAuthProvider, googleLogout, hasGrantedAllScopesGoogle, hasGrantedAnyScopeGoogle, useGoogleLogin, useGoogleOneTapLogin };\n","import { LoginButton } from \"../../lib/factory/buttonBase\";\nimport { useNavigate } from \"react-router-dom\";\nimport { oauthInfoList } from \"../../lib/general_info\";\nimport { useGoogleLogin } from \"@react-oauth/google\";\n\nconst { \n    REACT_APP_BACKEND_DOMAIN,\n    REACT_APP_GITHUB_CLIENT_ID } = process.env;\n\nexport function SignIn() {\n    \n    /**\n     * Login with Github will redirect user to an authorization callback URL\n     * so I redirect to a new route \"/oauth\" instead of back to this route \"/guestbook\"\n     * \n     * At route \"/oauth\", the received authorization code will be fetched to\n     * the backend api to process authentication. After backend responses \n     * a access_token successfully, users will be redirected back to \"/guestbook\"\n     */\n    function loginWithGithub() {\n        window.location.assign(\"https://github.com/login/oauth/authorize?client_id=\" + REACT_APP_GITHUB_CLIENT_ID);\n    }\n\n    /**\n     * Login with Google uses @react-oauth/google library, which authorizes\n     * in popup mode. The code is returned to in-browser's app callback handler,\n     * without users needing to leave the website\n     * \n     * https://developers.google.com/identity/oauth2/web/guides/how-user-authz-works#when_using_the_auth_code_flow\n     */\n    let navigate = useNavigate();\n    const loginWithGoogle = useGoogleLogin({\n        onSuccess: async ({code}) => {\n            if (localStorage.getItem(\"accessToken\") === null) {\n                await fetch(`${REACT_APP_BACKEND_DOMAIN}/oauth/google/access_token?code=` + code, {\n                    method: \"GET\"\n                })\n                .then(response => response.json())\n                .then(data => {\n                    if (data.access_token) {\n                        localStorage.setItem(\"accessToken\", data.access_token);\n                        localStorage.setItem(\"third-party\", \"google\");\n                        return navigate(\"/guestbook\");\n                    }\n                });\n            }\n        },\n        flow: \"auth-code\",\n    });\n\n    const onClickHandlers: any[] = [\n        loginWithGithub,\n        () => loginWithGoogle()\n    ];\n\n    return (\n        <>\n            {\n                oauthInfoList.map((oauth, index) => {\n                    return (\n                        <div key={oauth.name} className=\"col-6 btn-oauth-box\">\n                            <LoginButton \n                                onClick={onClickHandlers[index]}\n                                {...oauth} />\n                        </div>\n                    );\n                })\n            }\n        </>\n    );\n}\n\nexport function SignOut() {\n    let navigate = useNavigate();\n\n    function logOut() {\n        localStorage.removeItem(\"third-party\");\n        localStorage.removeItem(\"data\");\n        return navigate(\"/guestbook\");\n    }\n\n    return (\n        <button className=\"btn btn-rect\" onClick={logOut}>\n            Sign out\n        </button>\n    );\n}","import { useEffect, useState } from \"react\";\n\nconst { REACT_APP_BACKEND_DOMAIN } = process.env;\n\nexport interface IMessage {\n    name: string | null,\n    message: string\n}\n\nfunction capitalFirstLetter(s: string): string {  \n    return s.charAt(0).toUpperCase() + s.slice(1);\n}\n\nfunction GuestbookForm() {\n    const [User, setUser] = useState(\"\");\n\n    // Take username for every page restart\n    let username: string | null = null;\n    if (localStorage.getItem(\"data\") !== null) {\n        username = JSON.parse(localStorage.getItem(\"data\") as any).name;\n    }\n\n    async function fetchUser(thirdParty: string) {\n        console.log(`get ${thirdParty} user`);\n        const fetchAPI = await fetch(`${REACT_APP_BACKEND_DOMAIN}/oauth/${thirdParty}/user`, {\n            method: \"GET\",\n            headers: {\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"accessToken\")\n            }\n        });\n        const response = await fetchAPI.json();\n        return response;\n    }\n\n    const getGithubUser = async () => {\n        const response = await fetchUser(\"github\");\n        localStorage.removeItem(\"accessToken\");\n        localStorage.setItem(\"data\", JSON.stringify({\n            name: response.login\n        }));\n        setUser(response.login);\n    }\n\n    const getGoogleUser = async () => {\n        const response = await fetchUser(\"google\");\n        localStorage.removeItem(\"accessToken\");\n        localStorage.setItem(\"data\", JSON.stringify({\n            name: response.name\n        }));\n        setUser(response.name);\n    }\n\n    useEffect(() => {\n        if (localStorage.getItem(\"data\") === null) {\n            if (localStorage.getItem(\"third-party\") === \"github\") {\n                getGithubUser();\n            }\n            else if (localStorage.getItem(\"third-party\") === \"google\") {\n                getGoogleUser();\n            }\n        }\n    }, []);\n    \n    async function submitHandler(e: any) {\n        // Prevent page from reloading until the POST request finishes\n        e.preventDefault();\n\n        const data = JSON.parse(localStorage.getItem(\"data\") as any);\n        const input = document.getElementById(\"your-message\") as HTMLFormElement;\n        if (input.value.length === 0) {\n            alert(\"Your message cannot be empty\");\n            return;\n        }\n        if (input.value.length > 512) {\n            alert(\"Too long! Won't read -_-\");\n            return;\n        }\n        \n        const newMessage: IMessage = {\n            name: data.name,\n            message: input.value\n        }\n        \n        await fetch(`${REACT_APP_BACKEND_DOMAIN}/guestbook/add/`, {\n                method: \"POST\",\n                headers: {\n                        \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify(newMessage),\n                mode: \"cors\"\n        })\n        // .then(res => res.json())\n        // .then(data => console.log(data));\n\n        alert(\"Sign successfully :3\")\n        window.location.reload();\n    }\n\n    return (\n        <>\n            <p className=\"mb-2\">\n                Sign in as {\" \"} \n                <b>{username !== null ? username : User}</b> {\" \"}\n                via <b>{capitalFirstLetter(localStorage.getItem(\"third-party\") as string)}</b>\n            </p>\n            <form className=\"mb-3 guestbook-form row\" onSubmit={submitHandler}>\n                <input \n                    className=\"col-10 ps-3 pt-3 pb-3 pe-5\" \n                    placeholder=\"Your message...\"\n                    autoComplete=\"off\"\n                    type=\"text\" name=\"your message\" aria-label=\"your message\" id=\"your-message\" />\n                <button className=\"col-2 p-2\" type=\"submit\"><b>Sign</b></button>\n            </form>\n        </>\n    );\n}\n\nexport default GuestbookForm;","import { useEffect, useState } from \"react\";\n\nconst DOMAIN = process.env.REACT_APP_BACKEND_DOMAIN;\n\nfunction GuestbookList({maxGuests} : {maxGuests: number}) {\n    /**\n     * Implement infinite scrolling for guestbook\n     * - messageNums The number of messages for each\n     */\n    const messageNums = 40;\n    const [startId, setStartId] = useState(0);\n    const [hasMore, setHasMore] = useState(true);\n    const [msgs, setMsgs] : [any, any] = useState([]);\n\n    useEffect(() => {\n        const controller = new AbortController();\n        const signal = controller.signal;\n\n        const fetchMsgs = async (startId: number) => {\n            const nextStartId = startId + messageNums;\n            if (nextStartId >= maxGuests) setHasMore(!hasMore);\n\n            try {\n                const fetchAPI = await fetch(`${DOMAIN}/guestbook/list/${startId}`, { signal });\n                const data = await fetchAPI.json();\n                setMsgs([...msgs, ...data]);\n            } catch (error) {\n                console.log(error)\n            }\n        }\n\n        if (hasMore) fetchMsgs(startId);\n\n        return () => {\n            controller.abort();\n        }\n    }, [startId]);\n\n    useEffect(() => {\n        function onScroll() {\n            const scrollTop = document.documentElement.scrollTop;\n            const scrollHeight = document.documentElement.scrollHeight;\n            const clientHeight = document.documentElement.clientHeight;\n\n            if (scrollTop + clientHeight >= scrollHeight && hasMore) {\n                setStartId(startId => startId + messageNums);\n            }\n        }\n\n        window.addEventListener('scroll', onScroll)\n        return () => window.removeEventListener('scroll', onScroll)\n    }, [msgs]);\n\n    const guestbook = document.getElementsByClassName(\"guestbook-txt\")[0] as HTMLElement;\n    const wrapper = document.getElementsByClassName(\"guestbook-wrapper\")[0] as HTMLElement;\n    useEffect(() => {\n      if (wrapper.childNodes.length !== 0) wrapper.style.height = \"auto\";\n    }, [guestbook])\n\n    return (\n        <>\n            {msgs.map((msg: any, index: number) => {\n                return(\n                    <p key={index} className=\"mb-3\">\n                        <b>{msg.guest.name}:</b>{\" \"}\n                        {msg.guest.message}\n                    </p>\n                );\n            })}\n        </>\n    );\n}\n\nexport default GuestbookList;\n","import { useEffect, useState } from \"react\";\nimport * as Action from \"./actions\";\nimport GuestbookForm from \"./form\";\nimport GuestbookList from \"./list\";\nimport { GoogleOAuthProvider } from \"@react-oauth/google\";\n\nconst GG_CLIENT_ID: string = process.env.REACT_APP_GOOGLE_CLIENT_ID as string;\nconst DOMAIN = process.env.REACT_APP_BACKEND_DOMAIN;\n\nfunction GuestbookBody() {\n  const [maxGuests, setMaxGuests] = useState(0);\n  useEffect(() => {\n    const controller = new AbortController();\n    const signal = controller.signal;\n\n    const fetchMaxGuests = async () => {\n      try {\n        const fetchAPI = await fetch(`${DOMAIN}/guestbook/totalRecords`, { signal });\n        const curMaxGuests = await fetchAPI.json();\n        setMaxGuests(curMaxGuests[0][\"count\"]);\n      } catch (error) {\n        console.log(error)\n      }\n    };\n\n    fetchMaxGuests();\n\n    return () => {\n      controller.abort();\n    }\n  }, []);\n\n  return (\n    <div className=\"guestbook-wrapper mb-5\">\n      <GoogleOAuthProvider clientId={GG_CLIENT_ID}>\n        <div className=\"btn-grp oauth-grp pb-4\">\n          {localStorage.getItem(\"third-party\") === null ? (\n            <Action.SignIn />\n          ) : (\n            <>\n              <GuestbookForm />\n              <Action.SignOut />\n            </>\n          )}\n        </div>\n      </GoogleOAuthProvider>\n      <hr />\n      <article className=\"mt-5 guestbook-txt\">\n        {maxGuests > 0 ? (\n          <GuestbookList maxGuests={maxGuests} />\n        ) : (\n          <p>Waiting for the first message...</p>\n        )}\n      </article>\n    </div>\n  );\n}\n\nexport default GuestbookBody;\n","import GuestbookHeader from \"./header\";\nimport Copyright from \"../copyright\";\nimport GuestbookBody from \"./body\";\nimport { getMetadataURL } from \"../../lib/utils/Location\";\nimport { useLocation } from \"react-router-dom\";\nimport { Metadata } from \"../seo/Metadata\";\nimport CustomHead from \"../seo\";\n\nconst guestbookDescription = \"Welcome to my guestbook ~ Leave a message to me here\";\n\nexport default function GuestbookPage() {\n  const url = getMetadataURL(useLocation());\n\n  const metadata: Metadata = {\n    title: \"Guestbook\",\n    description: guestbookDescription,\n    canonicalURL: url,\n    og: {\n      url: url,\n      description: guestbookDescription,\n    },\n    twitter: {\n      url: url,\n      description: guestbookDescription,\n    },\n  };\n\n  return (\n    <div className=\"container page-wrapper transition-page\">\n      <CustomHead metadata={metadata} />\n      <GuestbookHeader />\n      <GuestbookBody />\n      <Copyright copyright_class=\"page-copyright pb-3\" />\n    </div>\n  );\n}\n"],"names":["GuestbookHeader","_jsxs","className","children","_jsx","href","target","rel","GoogleOAuthContext","createContext","GoogleOAuthProvider","_ref","clientId","nonce","onScriptLoadSuccess","onScriptLoadError","scriptLoadedSuccessfully","options","arguments","length","undefined","setScriptLoadedSuccessfully","useState","onScriptLoadSuccessRef","useRef","current","onScriptLoadErrorRef","useEffect","scriptTag","document","createElement","src","async","defer","onload","_a","call","onerror","body","appendChild","removeChild","useLoadGsiScript","contextValue","useMemo","React","Provider","value","useGoogleOAuth","context","useContext","Error","REACT_APP_BACKEND_DOMAIN","REACT_APP_GITHUB_CLIENT_ID","process","SignIn","navigate","useNavigate","loginWithGoogle","_ref3","flow","scope","onSuccess","onError","onNonOAuthError","overrideScope","state","props","clientRef","onSuccessRef","onErrorRef","onNonOAuthErrorRef","clientMethod","client","window","google","accounts","oauth2","client_id","concat","callback","response","_b","error","error_callback","nonOAuthError","loginImplicitFlow","useCallback","overrideConfig","requestAccessToken","loginAuthCodeFlow","requestCode","useGoogleLogin","code","localStorage","getItem","fetch","method","then","json","data","access_token","setItem","onClickHandlers","location","assign","_Fragment","oauthInfoList","map","oauth","index","LoginButton","onClick","name","SignOut","removeItem","User","setUser","username","fetchUser","thirdParty","console","log","fetchAPI","headers","JSON","parse","stringify","login","getGithubUser","getGoogleUser","s","charAt","toUpperCase","slice","onSubmit","e","preventDefault","input","getElementById","alert","newMessage","message","mode","reload","placeholder","autoComplete","type","id","maxGuests","startId","setStartId","hasMore","setHasMore","msgs","setMsgs","controller","AbortController","signal","fetchMsgs","abort","onScroll","scrollTop","documentElement","scrollHeight","clientHeight","addEventListener","removeEventListener","guestbook","getElementsByClassName","wrapper","childNodes","style","height","msg","guest","setMaxGuests","curMaxGuests","fetchMaxGuests","Action","GuestbookForm","GuestbookList","guestbookDescription","GuestbookPage","url","getMetadataURL","useLocation","metadata","title","description","canonicalURL","og","twitter","CustomHead","GuestbookBody","Copyright","copyright_class"],"sourceRoot":""}